<!-- login.html (Página de Login) -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Flipside Burgers Inspired</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; margin: 0; padding: 0; background: linear-gradient(90deg, #ff6347, #ffd700); color: #333; }
        header { background: linear-gradient(90deg, #ff6347, #ffd700); color: #fff; padding: 40px 20px; text-align: center; }
        header h1 { font-family: 'Playfair Display', serif; font-size: 48px; margin: 0; text-shadow: 2px 2px #000; }
        nav { background-color: #333; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; display: flex; justify-content: center; align-items: center; }
        nav a { color: #fff; margin: 0 20px; text-decoration: none; font-weight: bold; font-size: 18px; transition: color 0.3s; }
        nav a:hover { color: #ffd700; }
        .user-info { color: #ffd700; font-size: 18px; position: absolute; right: 20px; }
        .login-container { background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); width: 400px; text-align: center; margin: 40px auto; }
        .logo { font-family: 'Playfair Display', serif; font-size: 36px; color: #ff6347; margin-bottom: 20px; }
        .login-container h2 { font-size: 24px; margin-bottom: 20px; }
        .login-container input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; font-size: 16px; }
        .login-container button { width: 100%; padding: 12px; background-color: #ff6347; color: #fff; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background 0.3s; }
        .login-container button:hover { background-color: #dc143c; }
        .login-container .options { margin-top: 20px; font-size: 14px; }
        .login-container .options a { color: #1e90ff; text-decoration: none; }
        .login-container .options a:hover { text-decoration: underline; }
        .login-container .register-btn { background-color: #1e90ff; margin-top: 10px; }
        .login-container .register-btn:hover { background-color: #4169e1; }
        #profile { display: none; margin-top: 20px; text-align: left; }
        .success-message { display: none; background-color: #28a745; color: #fff; padding: 15px; border-radius: 5px; margin-top: 20px; text-align: center; font-size: 16px; }
        footer { background: linear-gradient(90deg, #ff6347, #ffd700); color: #fff; text-align: center; padding: 20px; font-size: 14px; }
    </style>
</head>
<body onload="displayUserInfo(); checkLoggedIn()">
    <header>
        <h1>Login</h1>
    </header>
    <nav>
        <div>
            <a href="index.html">Inicio</a>
            <a href="nosotros.html">Nosotros</a>
            <a href="menu.html">Menú</a>
            <a href="pedidos.html">Pedidos</a>
            <a href="contacto.html">Contacto</a>
            <a href="login.html">Login</a>
            <a href="#" onclick="logout()" id="logoutLink" style="display: none;">Cerrar Sesion</a>
        </div>
        <span class="user-info" id="userInfo"></span>
    </nav>
    <div class="login-container">
        <div class="logo">Flipside BK</div>
        <div id="profile">
            <h2>Información del Usuario</h2>
            <p>Nombre: <span id="profileUsername"></span></p>
            <p>Correo: <span id="profileEmail"></span></p>
            <p>Contraseña: <span id="profilePassword"></span></p>
            <button onclick="logout()">Cerrar Sesión</button>
        </div>
        <div id="forms">
            <h2>Inicia Sesión</h2>
            <form id="loginForm" onsubmit="login(event)">
                <input type="text" id="username" placeholder="Nombre *" required>
                <input type="email" id="email" placeholder="Dirección de correo electrónico *" required>
                <input type="password" id="password" placeholder="Contraseña *" required>
                <button type="submit">Iniciar Sesión</button>
                <p>¿No tienes cuenta? <a href="#" onclick="showRegister()">Regístrate</a></p>
            </form>
            <div id="successMessage" class="success-message">
                Usuario registrado correctamente, ya puedes iniciar sesión.
            </div>
            <form id="registerForm" style="display: none;" onsubmit="register(event)">
                <input type="text" id="regUsername" placeholder="Nombre *" required>
                <input type="email" id="regEmail" placeholder="Dirección de correo electrónico *" required>
                <input type="password" id="regPassword" placeholder="Contraseña *" required>
                <button type="submit" class="register-btn">Crear una cuenta</button>
                <button type="button" onclick="showLogin()" style="margin-top: 10px; background-color: #ccc; color: #333;">Regresar</button>
            </form>
        </div>
    </div>
    <footer>
        <p>&copy; 2025 Flipside Burgers Inspired. Todos los derechos reservados.</p>
    </footer>
    <script>
        function checkLoggedIn() {
            const user = JSON.parse(localStorage.getItem('loggedInUser'));
            if (user) {
                document.getElementById('forms').style.display = 'none';
                document.getElementById('profile').style.display = 'block';
                document.getElementById('profileUsername').textContent = user.username;
                document.getElementById('profileEmail').textContent = user.email;
                document.getElementById('profilePassword').textContent = user.password; // Not secure, but as requested
            }
        }

        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                localStorage.setItem('loggedInUser', JSON.stringify(user));
                alert(`Bienvenido, ${username}!`);
                window.location.reload(); // Reload to show profile
            } else {
                alert('Usuario no registrado o credenciales incorrectas.');
            }
        }

        function register(event) {
            event.preventDefault();
            const regUsername = document.getElementById('regUsername').value;
            const regEmail = document.getElementById('regEmail').value;
            const regPassword = document.getElementById('regPassword').value;
            const users = JSON.parse(localStorage.getItem('users')) || [];
            if (users.find(u => u.email === regEmail)) {
                alert('El correo ya está registrado.');
                return;
            }
            const newUser = { username: regUsername, email: regEmail, password: regPassword };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('loggedInUser', JSON.stringify(newUser));

            // Mostrar mensaje de éxito y volver a login
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'block';
            setTimeout(() => {
                successMessage.style.display = 'none';
                document.getElementById('registerForm').style.display = 'none';
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('registerForm').reset(); // Limpiar formulario de registro
            }, 3000); // Mostrar mensaje por 3 segundos
        }

        function showRegister() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }

        function showLogin() {
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').reset(); // Limpiar formulario de registro al regresar
        }

        function displayUserInfo() {
            const user = JSON.parse(localStorage.getItem('loggedInUser'));
            if (user) {
                document.getElementById('userInfo').textContent = `Bienvenido, ${user.username}`;
                document.getElementById('logoutLink').style.display = 'inline';
            }
        }

        function logout() {
            localStorage.removeItem('loggedInUser');
            localStorage.removeItem('cart');
            window.location.reload();
        }
    </script>
</body>
</html>